<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>POKO — Connexion</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400&family=Crimson+Pro:wght@300;400;600&display=swap" rel="stylesheet">
<script src="auth.js"></script>
<style>
:root{--gold:#c9a84c;--gold-light:#e8c76a;--green:#0f3d1f;--white:#f0ead6;--bg:#081c0e;}
*{margin:0;padding:0;box-sizing:border-box;}html,body{height:100%;}
body{background:var(--bg);font-family:'Crimson Pro',serif;color:var(--white);display:flex;align-items:stretch;min-height:100vh;overflow:hidden;}
.left-panel{flex:1;display:none;background:linear-gradient(160deg,#0f3d1f 0%,#081c0e 100%);position:relative;overflow:hidden;align-items:center;justify-content:center;flex-direction:column;padding:60px;}
@media(min-width:860px){.left-panel{display:flex;}}
.left-pattern{position:absolute;inset:0;background-image:radial-gradient(circle at 20% 50%,rgba(201,168,76,.07) 0%,transparent 50%),repeating-linear-gradient(45deg,transparent,transparent 40px,rgba(201,168,76,.02) 40px,rgba(201,168,76,.02) 41px);}
.left-suits{font-size:130px;opacity:.06;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);letter-spacing:16px;line-height:1.2;text-align:center;pointer-events:none;}
.left-content{position:relative;z-index:1;text-align:center;}
.left-logo{font-family:'Playfair Display',serif;font-size:88px;font-weight:900;color:var(--gold);letter-spacing:16px;text-shadow:0 0 60px rgba(201,168,76,.3),0 4px 8px rgba(0,0,0,.5);line-height:1;margin-bottom:12px;}
.left-tagline{font-size:11px;letter-spacing:6px;color:rgba(240,234,214,.4);text-transform:uppercase;}
.left-deco{width:50px;height:1px;background:var(--gold);margin:18px auto;opacity:.35;}
.left-quote{font-family:'Playfair Display',serif;font-style:italic;font-size:17px;color:rgba(240,234,214,.4);line-height:1.8;max-width:280px;}
.right-panel{width:100%;max-width:460px;background:rgba(0,0,0,.55);border-left:1px solid rgba(201,168,76,.1);display:flex;align-items:center;justify-content:center;padding:40px 44px;backdrop-filter:blur(12px);}
@media(max-width:859px){body{background:radial-gradient(ellipse at center,#1a5c2e 0%,var(--bg) 100%);}.right-panel{max-width:100%;border:none;background:transparent;padding:36px 24px;}}
.form-wrap{width:100%;max-width:360px;animation:fadeUp .5s ease;}
@keyframes fadeUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
.mobile-logo{font-family:'Playfair Display',serif;font-size:44px;font-weight:900;color:var(--gold);letter-spacing:12px;text-align:center;margin-bottom:30px;display:block;}
@media(min-width:860px){.mobile-logo{display:none;}}
.form-title{font-family:'Playfair Display',serif;font-size:26px;color:var(--white);margin-bottom:4px;}
.form-sub{font-size:11px;letter-spacing:3px;color:rgba(240,234,214,.3);text-transform:uppercase;margin-bottom:30px;}
.field{margin-bottom:18px;}
.field label{display:block;font-size:9px;letter-spacing:3px;color:var(--gold);text-transform:uppercase;margin-bottom:8px;}
.field input{width:100%;padding:13px 16px;background:rgba(240,234,214,.05);border:1px solid rgba(240,234,214,.1);border-radius:3px;color:var(--white);font-family:'Crimson Pro',serif;font-size:16px;outline:none;transition:all .2s;}
.field input:focus{border-color:rgba(201,168,76,.55);background:rgba(201,168,76,.05);box-shadow:0 0 0 3px rgba(201,168,76,.07);}
.field input::placeholder{color:rgba(240,234,214,.18);}
.error-box{background:rgba(192,57,43,.1);border:1px solid rgba(192,57,43,.3);color:#ff9080;font-size:13px;padding:12px 16px;border-radius:3px;margin-bottom:18px;display:none;}
.error-box.show{display:block;}
.btn-submit{width:100%;padding:15px;margin-top:4px;background:linear-gradient(135deg,var(--gold) 0%,var(--gold-light) 100%);color:#1a1200;border:none;border-radius:3px;font-family:'Playfair Display',serif;font-size:15px;font-weight:700;letter-spacing:4px;text-transform:uppercase;cursor:pointer;transition:all .3s;box-shadow:0 4px 24px rgba(201,168,76,.2);position:relative;overflow:hidden;}
.btn-submit:hover{transform:translateY(-2px);box-shadow:0 8px 32px rgba(201,168,76,.38);}
.btn-submit:disabled{opacity:.4;cursor:not-allowed;transform:none;}
.btn-inner{display:flex;align-items:center;justify-content:center;gap:10px;}
.spin{width:14px;height:14px;border:2px solid rgba(26,18,0,.3);border-top-color:#1a1200;border-radius:50%;animation:spin .5s linear infinite;display:none;}
@keyframes spin{to{transform:rotate(360deg)}}
.divider{display:flex;align-items:center;gap:14px;margin:24px 0;color:rgba(240,234,214,.22);font-size:11px;letter-spacing:2px;}
.divider::before,.divider::after{content:'';flex:1;height:1px;background:rgba(240,234,214,.08);}
.link-row{text-align:center;font-size:14px;color:rgba(240,234,214,.4);}
.link-row a{color:var(--gold);text-decoration:none;font-weight:600;}
.link-row a:hover{color:var(--gold-light);}
.back-home{display:block;text-align:center;margin-top:26px;font-size:10px;letter-spacing:2px;color:rgba(240,234,214,.22);text-decoration:none;text-transform:uppercase;transition:color .2s;}
.back-home:hover{color:rgba(240,234,214,.5);}
</style>
</head>
<body>
<div class="left-panel">
  <div class="left-pattern"></div>
  <div class="left-suits">♠♥<br>♦♣</div>
  <div class="left-content">
    <div class="left-logo">POKO</div>
    <div class="left-deco"></div>
    <div class="left-tagline">Jeu de Cartes Congolais</div>
    <div class="left-deco"></div>
    <div class="left-quote">"La carte la plus haute n'est pas toujours celle qui gagne."</div>
  </div>
</div>
<div class="right-panel">
  <div class="form-wrap">
    <div class="mobile-logo">POKO</div>
    <div class="form-title">Bienvenue</div>
    <div class="form-sub">Connexion à votre compte</div>
    <div class="error-box" id="errBox"></div>
    <div class="field"><label>Pseudo</label><input type="text" id="username" placeholder="votre_pseudo" autocomplete="username" autofocus></div>
    <div class="field"><label>Mot de passe</label><input type="password" id="password" placeholder="••••••••" autocomplete="current-password"></div>
    <button class="btn-submit" id="loginBtn" onclick="doLogin()">
      <div class="btn-inner"><span id="btnTxt">Se connecter</span><div class="spin" id="spin"></div></div>
    </button>
    <div class="divider">OU</div>
    <div class="link-row">Pas de compte ? <a href="register.html">Créer un compte →</a></div>
    <a class="back-home" href="index.html">← Retour à l'accueil</a>
  </div>
</div>
<script>
requireGuest();
document.addEventListener('keydown',e=>{if(e.key==='Enter')doLogin();});
function showErr(msg){const b=document.getElementById('errBox');b.textContent=msg;b.classList.add('show');}
function doLogin(){
  const u=document.getElementById('username').value.trim();
  const p=document.getElementById('password').value;
  document.getElementById('errBox').classList.remove('show');
  if(!u||!p){showErr('Remplis tous les champs.');return;}
  const btn=document.getElementById('loginBtn');btn.disabled=true;
  document.getElementById('btnTxt').textContent='Connexion…';document.getElementById('spin').style.display='block';
  setTimeout(()=>{
    const r=await POKO_DB.login(u,p);
    if(r.ok){window.location.href='index.html';}
    else{showErr(r.msg);btn.disabled=false;document.getElementById('btnTxt').textContent='Se connecter';document.getElementById('spin').style.display='none';}
  },400);
}
</script>
</body>
</html>
